function gotoSelectVedlegg(){$("#skjema2011-schemaAndAttachment").show(),$(".skjema2011form-details").hide(),$("#NAVskjema2011DownloadContainer").hide(),$(".vedleggsveileder1").addClass("selected"),$(".vedleggsveileder2").removeClass("selected"),$(".vedleggsveileder2").addClass("waiting"),$("h1#steg_header, p#steg_header_info").text("Du er p� steg 3 av 5; Kryss av for vedlegg")}function goToDownloadSkjemaveileder(e){changeexcaseNAVKontor(),changenavdepartment1(),changeSelectedNavUnitMultiple(),createCookie("skjemaveileder_chosennavunit_privatperson",$("#navdepartment1Selected").text(),.01),void 0==$("input[name='situation']:checked").val()?$("#notChosenAnySituationError").show():(("alt6"==$("input[name='situation']:checked").val()||"alt7"==$("input[name='situation']:checked").val())&&$("form#formgenerator").submit(),validinput=!0,clearErrorMessages(),validfnr=!1,validateFields(),validateFindAddress()),1==validinput&&1==validfnr&&($("#formgenerator").attr("action",e),$("form#formgenerator").submit())}function goToDownload(){changeexcaseNAVKontor(),changenavdepartment1(),changeSelectedNavUnitMultiple(),createCookie("skjemaveileder_chosennavunit_privatperson",$("#navdepartment1Selected").text(),.01),void 0==$("input[name='situation']:checked").val()?$("#notChosenAnySituationError").show():(("alt6"==$("input[name='situation']:checked").val()||"alt7"==$("input[name='situation']:checked").val())&&$("form#formgenerator").submit(),validinput=!0,clearErrorMessages(),validfnr=!1,validateFields(),validateFindAddress()),1==validinput&&1==validfnr&&$("form#formgenerator").submit()}function goToUserDetailsPrivatpersonEttersendelse(){window.location.hash="adr",$(".skjema2011form-details").show(),$("#downloadbutton").show(),$("#skjema2011-schemaAndAttachment").hide(),$("#NAVskjema2011DownloadContainer").hide(),$(document).scrollTop(0)}function changeSelectedNavUnitOrg(){$("#navUnitOrgSelectedChangeButton").hide(),$("#navUnitOrg").val($("#navUnitOrgSelected").text()),$("#navUnitOrgSelected").hide(),$("#navUnitOrg").show()}function changeSelectedNavUnitMultiple(){$("#navUnitMultipleSelectedChangeButton").hide(),$("#navUnitMultiple").val($("#navUnitMultipleSelected").text()),$("#navUnitMultipleSelected").hide(),$("#navUnitMultiple").show()}function changenavdepartment1(){$("#navdepartment1SelectedChangeButton").hide(),$("#navdepartment1").val($("#navdepartment1Selected").text()),$("#navdepartment1Selected").hide(),$("#navdepartment1").show()}function changeexcaseNAVKontor(){$("#excaseNAVKontorSelectedChangeButton").hide(),$("#excaseNAVKontor").val($("#excaseNAVKontorSelected").text()),$("#excaseNAVKontorSelected").hide(),$("#excaseNAVKontor").show()}function checkCategory(){var e=$("#chooseCategorySelectAdr").val().split(",");"true"==e[0]&&"true"==e[1]&&"true"==e[2]?$("#addressMainstep1").hide():$("#addressMainstep1").show(),"true"==e[0]?$("#addressStep1").hide():$("#addressStep1").show(),"true"==e[1]?$("#addressStep2").hide():$("#addressStep2").show(),"true"==e[2]?$("#addressStep3").hide():$("#addressStep3").show(),"true"==e[3]?$("#addressMainstep2").hide():$("#addressMainstep2").show(),"true"==e[4]?$("#addressMainstep3").hide():$("#addressMainstep3").show(),"ettersendelsearbeidsgiver"!=$("input[name='type']").val()&&("true"==e[3]&&"true"==e[4]&&($("#adralt1").click(),$("#adralt1").nextAll(".toggleAddressBody").click()),"true"==e[0]&&"true"==e[1]&&"true"==e[2]&&"false"==e[3]&&"true"==e[4]&&($("#alt4").click(),$("#alt4").nextAll(".toggleAddressBody").click()),"true"==e[0]&&"true"==e[1]&&"true"==e[2]&&"true"==e[3]&&"false"==e[4]&&($("#alt5").click(),$("#alt5").nextAll(".toggleAddressBody").click()))}function clearErrorMessages(){$(".NAVerrorBoxWrapper").hide(),$(".NAVerrorBoxWrapperComplaint").hide(),$("#skjema2011userDetails .NAVerrorBox").hide()}function onBlur(e){""==e.value&&(e.value=e.defaultValue)}function onFocus(e){e.value==e.defaultValue&&(e.value="")}function readCookie(e){for(var t=encodeURI(e)+"=",n=document.cookie.split(";"),a=0;a<n.length;a++)for(var i=n[a];" "==i.charAt(0);)if(i=i.substring(1,i.length),0==i.indexOf(t))return decodeURI(i.substring(t.length,i.length));return null}function setsenderChosenVariables(){$("#innorwayzipchosen").text($("#innorwayzip").val()),$("#innorwayfnrchosen").text($("#innorwayfnr").val()),"undefined"!=$("#selectEnhet option:selected").text()&&""!=$("#selectEnhet option:selected").text()?($("#navofficeleadtext").show(),$("#selectedUnitChosen2").text(""),$("#selectedUnitChosen").text($("#selectEnhet option:selected").text())):"undefined"!=$("#selectEnhet2 option:selected").text()&&""!=$("#selectEnhet2 option:selected").text()?($("#navofficeleadtext").hide(),$("#selectedUnitChosen").text(""),$("#navofficeleadtext2").show(),$("#selectedUnitChosen2").text($("#selectEnhet2 option:selected").text())):($("#selectedUnitChosen").text(""),$("#selectedUnitChosen2").text(""),$("#navofficeleadtext").hide(),$("#navofficeleadtext2").hide()),$("#notinnorwaycoaddresschosen").text($("#notinnorwaycoaddress").val()),$("#notinnorwaystreetaddresschosen").text($("#notinnorwaystreetaddress").val()),$("#notinnorwayzipchosen").text($("#notinnorwayzip").val()),$("#notinnorwaypostalplacechosen").text($("#notinnorwaypostalplace").val()),$("#notworkinnorwayfnrchosen").text($("#notworkinnorwayfnr").val()),$("#navunitchosenmultiple").text($("#navUnitMultipleSelected").text()),$("#navunitchosenorg").text($("#navUnitOrgSelected").text())}function showErrorMessage(){$(".NAVerrorBoxWrapper").show(),$(".NAVerrorBoxWrapperComplaint").show(),"alt1"==$('input[name="situation"]:checked').val()?$("#errorBoxZip").show():"alt2"==$('input[name="situation"]:checked').val()?$("#errorBoxZip2").show():"alt3"==$('input[name="situation"]:checked').val()&&$("#fnrUtlandError").show()}function createCookie(e,t,n){var a;if(n){var i=new Date;i.setTime(i.getTime()+1e3*60*60*24*n),a="; expires="+i.toGMTString()}else a="";document.cookie=encodeURI(e)+"="+encodeURI(t)+a+"; path=/"}function validateFields(){var e=$("input[name=situation]:checked:first").parents(".addressInfo"),t=$(e).siblings(".addressInfo");$(".invalidfield",t).removeClass("invalidfield"),$("#enhetsSelectBox",t).hide(),$("#enhetsSelectBox2",t).hide(),!e.length>0&&"alt1"==$('input[name="chooseSenderSituation"]:checked').val()?$("#missingaddresserrormsg").show():checkUserInputs(e)}function checkUserInputs(e){var t=/^[0-9]{4}$/;$(".required",e).each(function(){var e=$(this);if($(e).hasClass("postalcode")){var n=$(e).val().match(t);n?$(e).removeClass("invalidfield"):($(e).not(".invalidfield").addClass("invalidfield"),showErrorMessage(),validinput=!1)}}),$("#notinnorwaycoaddress",e).each(function(){var e=$(this),t=$.trim($(e).val());hasIllegalChars(t)?($(e).not(".invalidfield").addClass("invalidfield"),$("#notinnorwaycoaddresserror").show(),$(".NAVerrorBoxWrapper").show(),validinput=!1):hasNumbers(t)?($(e).not(".invalidfield").addClass("invalidfield"),$("#notinnorwaycoaddresserror").show(),$(".NAVerrorBoxWrapper").show(),validinput=!1):$(this).removeClass("invalidfield")}),$("#notinnorwaystreetaddress",e).each(function(){var e=$(this),t=$.trim($(e).val());$(e).hasClass("required")&&!t.length>0?($(e).not(".invalidfield").addClass("invalidfield"),$(".NAVerrorBoxWrapper").show(),$("#notinnorwaystreetaddresserror").show(),validinput=!1):hasIllegalChars(t)?($(".NAVerrorBoxWrapper").show(),$("#notinnorwaystreetaddresserror").show(),validinput=!1):$(this).removeClass("invalidfield")})}function validateFindAddress(){"alt1"==$("input[name='situation']:checked").val()?(validateFnr($("#innorwayfnr").val()),void 0!=$("#selectEnhet option:selected").val()&&$("#chosennavunit").val($("#selectEnhet option:selected").val()),0==validfnr&&($("#fnrError").show(),$(".NAVerrorBoxWrapper").show())):"alt2"==$("input[name='situation']:checked").val()?(void 0!=$("#selectEnhet2 option:selected").val()&&$("#chosennavunit").val($("#selectEnhet2 option:selected").val()),validfnr=!0):"alt3"==$("input[name='situation']:checked").val()?(validateFnr($("#notworkinnorwayfnr").val()),0==validfnr&&($("#fnrUtlandError").show(),$(".NAVerrorBoxWrapper").show())):"alt4"==$("input[name='situation']:checked").val()?""==$("#navUnitMultipleSelected").text()?($("#navUnitMultipleError").show(),$(".NAVerrorBoxWrapper").show()):(checkPostalNumber(),validfnr=!0):"alt5"==$("input[name='situation']:checked").val()&&"true"==$("input[name='klage']").val()?(validateFnr($("#innorwayfnr").val()),0==validfnr&&($("#fnrError").show(),$(".NAVerrorBoxWrapper").show(),$(".NAVerrorBoxWrapperComplaint").show()),""==$("#navUnitOrgSelected").text()?($("#navUnitOrgError").show(),$(".NAVerrorBoxWrapper").show(),$(".NAVerrorBoxWrapperComplaint").show(),validinput=!1):checkPostalNumber()):"alt5"==$("input[name='situation']:checked").val()?""==$("#navUnitOrgSelected").text()?($("#navUnitOrgError").show(),$(".NAVerrorBoxWrapper").show()):(checkPostalNumber(),validfnr=!0):"alt6"==$("input[name='situation']:checked").val()?validfnr=!0:"alt7"==$("input[name='situation']:checked").val()&&(validfnr=!0)}function validateFnr(e){var t=[0,0,0,0,0,0,0,0,0,0,0],n=0,a=0,o=[3,7,6,1,8,9,4,5,2],r=[5,4,3,2,7,6,5,4,3,2],s=11,l=11,c=11;if("undefined"==e||e.length!=s||"00000000000"==e)return!1;for(i=0;s>i;i++){var d=e.charAt(i);if("0">d||d>"9")return!1;t[i]=d}for(i=0;s-2>i;i++)n+=t[i]*o[i];if(a=n%c,0==a&&(a=l),n=parseInt(t[s-2])+a-l,0!=n)return!1;for(n=0,i=0;s-1>i;i++)n+=t[i]*r[i];return a=n%c,(0==a||1==a)&&(a=l),n=parseInt(t[s-1])+a-l,0==n&&(validfnr=!0),0==n}function checkPostalNumberCallback(e){if(mottakerEnheter=e,"alt2"==$('input[name="situation"]:checked').val()&&$("#notinnorwaypostalplace").val(mottakerEnheter.postalPlace),null!=mottakerEnheter&&1==mottakerEnheter.offices.length)$("#chosennavunit").val(mottakerEnheter.offices[0].id);else if(null!=mottakerEnheter&&mottakerEnheter.offices.length>1){clearOptionsList(document.formgenerator.enhetsvalg),clearOptionsList(document.formgenerator.enhetsvalg2);for(n in mottakerEnheter.offices)if(mottakerEnheter.offices[n].hasOwnProperty("name")){var t=mottakerEnheter.offices[n];addToOptionList(document.formgenerator.enhetsvalg,t.name,t.id),addToOptionList(document.formgenerator.enhetsvalg2,t.name,t.id)}"alt1"==$('input[name="situation"]:checked').val()&&($("#enhetsSelectBox").show(),$("#selectEnhet").val(mottakerEnheter.offices[0].id)),"alt2"==$('input[name="situation"]:checked').val()&&($("#enhetsSelectBox2").show(),$("#selectEnhet2").val(mottakerEnheter.offices[0].id))}}function checkPostalNumber(){var e=retrieveNecessaryParams($("#formgenerator").serialize(),1,!0);$.ajax({url:postNrCheckUrl,dataType:"script",data:e,type:"GET"})}function addToOptionList(e,t,n){e[e.length]=new Option(t,n)}function clearOptionsList(e){for(x=e.length;x>=0;x-=1)e[x]=null}function setChosenNavUnit(){$("#alt1").click(function(){$("#chosennavunit").val("")}),$("#alt2").click(function(){$("#chosennavunit").val("")}),$("#alt3").click(function(){$("#chosennavunit").val("")}),$("#alt4").click(function(){$("#chosennavunit").val("")}),$("#alt5").click(function(){$("#chosennavunit").val("")}),$("#alt6").click(function(){$("#chosennavunit").val($("#navofficealt6").val())}),$("#alt7").click(function(){$("#chosennavunit").val($("#navofficealt7").val())})}function addAutocomplete(e,t,n,a){e.autocomplete({source:function(e,t){e.term=e.term.replace(/æ/g,"%C3%A6"),e.term=e.term.replace(/ø/g,"%C3%B8"),e.term=e.term.replace(/å/g,"%C3%A5"),e.term=e.term.replace(/Æ/g,"%C3%86"),e.term=e.term.replace(/Ø/g,"%C3%98"),e.term=e.term.replace(/Å/g,"%C3%85"),$.get(autocompleteUrl+"?term="+e.term,function(e){e&&t(JSON.parse(e))})},minLength:2,delay:400,select:function(i,o){t.val(o.item.value),n.text(o.item.label),n.show(),a.show(),e.hide(),clearErrorMessages()},focus:function(){return!1}})}function retrieveNecessaryParams(e,t,n){var a="innorwayzip";2==t&&(a="notinnorwayzip");var o=e.split("&"),r="",s=0;if(n)for(i=0;i<o.length;i++)(o[i].indexOf("situation")>=0||o[i].indexOf("type")>=0||o[i].indexOf("key")>=0||o[i].indexOf(a)>=0)&&(0!=s&&(r+="&"),r+=o[i],s++);else for(i=0;i<o.length;i++)o[i].indexOf("=")!=o[i].length-1&&(0!=s&&(r+="&"),r+=o[i],s++);return r}function hasIllegalChars(e){return e.match(/[\[\]=\/\?@\:\;\|�!#��\$%&{}\+\^�~`�*><]/g)}function changeValue(e){$("#chosenNavUnit").attr("value",e)}function hasNumbers(e){return e.match(/\d/)}function goBack(){history.go(-1),$("#NAVvedleggsveilederContainer").show(),$("#NAVvedleggsveilederDownloadContainer").hide(),$("#navdepartment1Selected").show(),$("#navUnitOrgSelected").show(),$("#navUnitMultipleSelected").show(),$("#excaseNAVKontorSelected").show()}$(".velgBoks").checked||$(".velgBoks").siblings("div .attachmentbody").find("input[type=checkbox]").attr("disabled",!0),$(".velgBoks").click(function(){var e=$(this).parents("div.attachment"),t=e.children(".text-wrapper").children(".attachmentbody");this.checked&&t.is(":hidden")?e.find(".toggleAttachmentBody").click():!this.checked&&t.is(":not(:hidden)")&&(e.find(".toggleAttachmentBody").click(),t.slideUp("fast")),this.checked?$(this).siblings("div .attachmentbody").find("input[type=checkbox]").attr("disabled",!1):($(this).siblings("div .attachmentbody").find("input[type=checkbox]").attr("disabled",!0),$(this).parent().find("input[type=checkbox][checked]").attr("checked",!1)),$(this).parent(".NAVskjemaIndre").hasClass("checked")?$(this).parent(".NAVskjemaIndre").removeClass("checked"):$(this).parent(".NAVskjemaIndre").addClass("checked")}),$(".toggleAttachmentBody").click(function(e){var t=$(this).parents("div.attachment").children(".text-wrapper").children(".attachmentbody"),n=$(this).attr("src");t.is(":hidden")?(t.slideDown("fast"),$(this).attr("src",n.replace("apne","lukk")),$(this).attr("alt","Klikk her for � skjule mer informasjon")):(t.slideUp("fast"),$(this).attr("src",n.replace("lukk","apne")),$(this).attr("alt","Klikk her for mer informasjon")),e.preventDefault()}),$(".toggleAddressBody").click(function(e){var t=$(this).parents("div.NAVskjemaIndre").children("div.moreaddressoptions"),n=$(this).attr("src"),a=$(this).parents(".NAVskjemaIndre").siblings();t.is(":hidden")?(t.slideDown("fast"),$(this).attr("src",n.replace("apne","lukk")),$(this).attr("alt","Klikk her for � skjule adresseinformasjon"),a.find(".moreaddressoptions").slideUp(),a.find(".toggleAddressBody").each(function(){$(this).attr("src",$(this).attr("src").replace("lukk","apne"))})):(t.slideUp("fast"),$(this).attr("src",n.replace("lukk","apne")),$(this).attr("alt","Klikk her for � gi inn adresseinformasjon")),e.preventDefault(),clearErrorMessages()}),$(".chooseSenderSituation").click(function(){var e=$(this).parents("div.userinputsection"),t=e.find(".moreaddressoptions"),n=$(this).parents(".NAVskjemaIndre").siblings(),a=n.find("input[type=text]");for(x=0;x<a.length;x+=1)a[x].value="";if("ettersendelsearbeidsgiver"==$("input[name='type']").val()){var i=$(this).parents(".userinputsectionIndre"),o=i.find(".ettersendelsearbeidsgiveroptions");this.checked&&o.is(":hidden")&&$([e[0]]).find(".toggleAddressBody").click()}else this.checked&&t.is(":hidden")&&e.find(".toggleAddressBody").click();return $(this).parents(".NAVskjemaIndre").hasClass("checked")?void 0:($(this).parents(".NAVskjemaIndre").addClass("checked"),$(this).parents(".NAVskjemaIndre").siblings().removeClass("checked"),!0)}),$("#innorwayzip").bind("keyup",function(){var e=/^[0-9]{4}$/,t=$(this).val();4==t.length&&t.match(e)&&(checkPostalNumber(),$("#enhetsSelectBox").hide(),$("#selectEnhet option:selected").text("undefined"),$("#selectEnhet option:selected").val("undefined"))}),$("#notinnorwayzip").bind("keyup",function(){var e=/^[0-9]{4}$/,t=$(this).val();4==t.length&&t.match(e)&&(checkPostalNumber(),$("#enhetsSelectBox2").hide(),$("#selectEnhet2 option:selected").text("undefined"),$("#selectEnhet2 option:selected").val("undefined"))});