function Trim(t){return LTrim(RTrim(t))}function LTrim(t){var e=/^\s*/;return t.replace(e,"")}function RTrim(t){var e=/\s*$/;return t.replace(e,"")}function validateFnr(t){var e=[0,0,0,0,0,0,0,0,0,0,0],n=0,o=0,a=[3,7,6,1,8,9,4,5,2],s=[5,4,3,2,7,6,5,4,3,2],r=11,l=11,c=11;if("undefined"==t||t.length!=r||"00000000000"==t)return!1;for(i=0;r>i;i++){var u=t.charAt(i);if("0">u||u>"9")return!1;e[i]=u}for(i=0;r-2>i;i++)n+=e[i]*a[i];if(o=n%c,0==o&&(o=l),n=parseInt(e[r-2])+o-l,0!=n)return!1;for(n=0,i=0;r-1>i;i++)n+=e[i]*s[i];return o=n%c,(0==o||1==o)&&(o=l),n=parseInt(e[r-1])+o-l,0==n&&(validfnr=!0),0==n}function validateInput(t){clearErrorMessages();var e=!1;return e=validerBeskrivelsesFelt(),isTilbakemelding()?e|=validerEpostFelt():isKlagePaaService()?e=e|validerPersonnummerFelt()|validerOrgnr(t)|validerValgtEnhet()|validerRequired():isRos()&&(e|=validerValgtEnhet()),e?!1:!0}function validerRequired(){$("form input.required").each(function(){var t=$(this),e=$.trim($(t).val());return e.length>0?(t.siblings(".formgroup-error").hide(),!1):(t.siblings(".formgroup-error").show(),!0)})}function clearErrorMessages(){$(".orgnrError").hide(),$(".formgroup-error").hide(),$(".enhetError").hide(),$(".pnrError").hide(),$(".epostError").hide(),$(".beskrivelseError").hide()}function validerBeskrivelsesFelt(){var t="";return isTextAreaEmpty($.trim($("#beskrivelse").val()))&&(t="<p>Tilbakemeldingsfeltet er ikke fylt ut</p>"),""!=t?(t='<a name="scrollTop">&nbsp;</a><div class="NAVerrorBox">'+t+"</div>",$(".beskrivelseError").html(t),$(".beskrivelseError").show(),!0):!1}function validerEpostFelt(){if($("#tbEmail").length){var t="";return epost=$("#tbEmail").val(),""!=epost&&(AtPos=epost.indexOf("@"),StopPos=epost.lastIndexOf("."),(-1==AtPos||-1==StopPos)&&(t="<p>E-postadressen er ikke gyldig </p>")),""!=t?(t='<a name="scrollTop">&nbsp;</a><div class="NAVerrorBox">'+t+"</div>",$(".epostError").html(t),$(".epostError").show(),!0):!1}}function validerPersonnummerFelt(){if($("#klagerPersonnummer").length){var t="",e=$("#klagerPersonnummer").val();return 11!=e.length||isNaN(e)?t="<p>Fødselsnummer skal bestå av 11 siffer</p>":validateFnr(e)||(t="<p>Fødselsnummer er ikke gyldig</p>"),""!=t?(t='<div class="NAVerrorBox">'+t+"</div>",$(".pnrError").html(t),$(".pnrError").show(),!0):($(".pnrError").html(""),$(".pnrError").hide(),!1)}}function validerOrgnr(t){if($("#orgnr").length){var e=/^[0-9]{9}$/,n=$("#orgnr").val(),i='<div class="NAVerrorBox"><p>Organisasjonsnummer skal bestå av ni siffer</p></div>';if(!n.match(e))return $(".orgnrError").html(i).show(),t.preventDefault(),!1;if(!n.match(e))return t.preventDefault(),!1;orgMod11(n,t)}}function orgMod11(t,e){for(var n=[3,2,7,6,5,4,3,2],i=0,o=0,a=0,s=0;8>s;s++)i+=t[s]*n[s];return o=i%11,a=0===o?0:11-o,1!==o&&a===parseInt(t[8],10)?!0:(orgNrErrorMsg='<div class="NAVerrorBox"><p>Organisasjonsnummer er ugyldig</p></div>',$(".orgnrError").html(orgNrErrorMsg).show(),e.preventDefault(),!1)}function validerValgtEnhet(){var t="";return""==$("#navEnhetValgt").text()&&(t="<p>Du har ikke valgt NAV-kontor. Velg fra forslagslisten som dukker opp når du taster</p>"),""!=t?(t='<a name="scrollTop">&nbsp;</a><div class="NAVerrorBox">'+t+"</div>",$(".enhetError").html(t),$(".enhetError").show(),document.location.hash="#scrollTop",!0):($(".enhetError").html(""),$(".enhetError").hide(),!1)}function isTextAreaEmpty(t){return""==t||t==beskrivelseInitText}function onBlur(t){""==t.value&&(t.value=t.defaultValue,$(t).addClass("defaultText"))}function onFocus(t){t.value==t.defaultValue&&(t.value="",$(t).removeClass("defaultText"))}function endreValgtEnhet(){$("#velgNavEnhetChangeButton").hide(),$("#navEnhetValgt").text(""),$("#navEnhetValgt").hide(),$("#velgNavEnhet").val(""),$("#velgNavEnhet").show(),"Ros"==$("input[name='subject']").val()&&$("input[name='to']").val(defaultEpostadresse)}function imposeMaxLength(t,e,n){e.value.length>n&&(e.value=e.value.substring(0,n));var i=n-e.value.length;return $("span#gjenstaar").text(i),e.value.length<=n||8==t.keyCode||46==t.keyCode||t.keyCode>=35&&t.keyCode<=40}function textareaInit(){$("#beskrivelse").val()===beskrivelseInitText?$("#beskrivelse").addClass("defaultText"):$("#beskrivelse").removeClass("defaultText")}function nullstill(){isTilbakemelding()||nullstillValgtEnhet(),nullstillBeskrivelsesFelt(),clearErrorMessages()}function nullstillValgtEnhet(){$("#velgNavEnhetChangeButton").click()}function nullstillBeskrivelsesFelt(){$("span#gjenstaar").text("1000"),$("#beskrivelse").addClass("defaultText")}function populateSubjectFieldWithSelectedCategory(){$("input[name='subject']").val($("#selectCategory").val())}function isTilbakemelding(){return"Tilbakemelding"==$("input[name='subject']").val()||$("input[name='subject']").val()==$("#selectCategory").val()}function isKlagePaaService(){return"Serviceklage"==$("input[name='subject']").val()}function isRos(){return"Ros"==$("input[name='subject']").val()}$(function(){$("#klage-ris-ros-skjema").on("submit",function(t){var e=validateInput(t);return e?($("#velgNavEnhet").val(""),!0):!1})}),$(function(){$("#typeofservice").change(function(){"other"===$(this).val()?$("#othertypeofservice").parent("div").show():$("#othertypeofservice").val("").parent("div").hide()})}),$(function(){var t=$("#Enhet"),e=$(".enhetError"),n=$("#navEnhetValgt");$("input[name='to']").val(),textareaInit(),n.text(""),e.hide(),$(".beskrivelseError").hide(),$(".pnrError").hide(),$(".epostError").hide(),"undefined"!=typeof updateSubjectField&&populateSubjectFieldWithSelectedCategory(),t.autocomplete({source:function(t,e){t.term=t.term.replace(/æ/g,"%C3%A6"),t.term=t.term.replace(/ø/g,"%C3%B8"),t.term=t.term.replace(/å/g,"%C3%A5"),t.term=t.term.replace(/Æ/g,"%C3%86"),t.term=t.term.replace(/Ø/g,"%C3%98"),t.term=t.term.replace(/Å/g,"%C3%85"),$.get(autocompleteUrl+"?term="+t.term,function(t){t&&e(JSON.parse(t))})},minLength:2,delay:400,select:function(i,o){t.val(o.item.value),n.text(o.item.label).show(),$("#velgNavEnhetChangeButton").show(),t.hide(),e.html("")},focus:function(e,n){e.preventDefault(),t.val(n.item.label)}})});