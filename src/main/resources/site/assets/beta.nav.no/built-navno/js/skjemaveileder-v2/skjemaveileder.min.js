function restoreSelectedNavUnitViewElements(e,t){e.val(t).hide(),e.siblings("span.chosenNavUnitName").text(t).show(),e.siblings("input[type='button']").show()}function restoreNavUnitTextInput(e,t){e.siblings("input[type='button']").hide();var n=e.siblings("input[type='text']").val("").show();t&&n.val(e.text()),e.hide()}function checkPostalNumberCallback(e){var t=e,i=$("input[data-active-postnr-input='true']");i.removeAttr("data-active-postnr-input");var a=$("#"+i.attr("data-office-list-id"));if("alt2"==$('input[name="situation"]:checked').val()&&($("#notinnorwaypostalplace").val(t.postalPlace),$("#postalplacetxt").text(t.postalPlace)),null!==t&&t.offices.length>0&&($("#chosennavunit").val(t.offices[0].id),t.offices.length>1)){a.find("input[type='radio']").attr("checked",!1).parent().remove();for(n in t.offices)if(t.offices[n].hasOwnProperty("name")){var r=t.offices[n];a.append("<li><input type='radio' name='enhet' id='"+r.id+"'/>"+"<label for='"+r.id+"'>"+r.name+"</label>"+"</li>")}a.parent().show();var o=a.find("input[type='radio']");("alt1"===$('input[name="situation"][data-checked="true"]').val()||"alt2"===$('input[name="situation"]:checked').val())&&o.first().attr("checked",!0),o.on("click",function(){$("#chosennavunit").val($(this).attr("id"))})}}function checkPostalNumber(e){var t=$("#address-options-form").attr("data-postnrcheck-url"),n=requestParametersForPostalNumberCheck($("#address-options-form").serializeArray()),i=e?e.next("#postalplacetxt"):null;i&&i.empty().addClass("input-spinner"),$.ajax({url:t,dataType:"script",data:n,type:"GET"}).always(function(){i&&i.removeClass("input-spinner")})}function requestParametersForPostalNumberCheck(e,t){var n=2===t?"notinnorwayzip":"innorwayzip",i="";return $.each(e,function(e,t){isValidParameter(t.name,n)&&""!==t.value&&(0!==e&&(i+="&"),i+=t.name+"="+t.value)}),i}function isValidParameter(e,t){return"situation"===e||"type"===e||"key"===e||"situation"===e||e.indexOf(t)>-1?!0:!1}function addAutocomplete(e,t,n,i){e.autocomplete({source:function(e,t){e.term=e.term.replace(/æ/g,"%C3%A6"),e.term=e.term.replace(/ø/g,"%C3%B8"),e.term=e.term.replace(/å/g,"%C3%A5"),e.term=e.term.replace(/Æ/g,"%C3%86"),e.term=e.term.replace(/Ø/g,"%C3%98"),e.term=e.term.replace(/Å/g,"%C3%85"),$.get(autocompleteUrl+"?term="+e.term,function(e){e&&t(JSON.parse(e))})},minLength:2,delay:400,select:function(a,r){t.val(r.item.value),n.text(r.item.label),n.show(),i.show(),e.hide()},focus:function(){return!1}})}function changenavdepartment1(){var e=$("#navdepartment1Selected");restoreNavUnitTextInput(e,!0)}function changeexcaseNAVKontor(){var e=$("#excaseNAVKontorSelected");restoreNavUnitTextInput(e,!0)}function changeSelectedNavUnitOrg(){var e=$("#navUnitOrgSelected");restoreNavUnitTextInput(e,!0)}function changeSelectedNavUnitMultiple(){var e=$("#navUnitMultipleSelected");restoreNavUnitTextInput(e,!0)}function goBack(){history.go(-1),$("#NAVvedleggsveilederContainer").show(),$("#NAVvedleggsveilederDownloadContainer").hide(),$("#navdepartment1Selected").show(),$("#navUnitOrgSelected").show(),$("#navUnitMultipleSelected").show(),$("#excaseNAVKontorSelected").show()}function isNotUndefined(e){return"undefined"!=typeof e?!0:!1}function onBlur(e){""===e.value&&(e.value=e.defaultValue)}function onFocus(e){e.value==e.defaultValue&&(e.value="")}$(function(){function e(){var e=$("#nav-unit");$("#excase1").on("click",function(){e.slideToggle(k)});var t=$("#nav-unit-2");$('.radio-options input[name="utland"]').on("click",function(){var e=1===$("#utlandContactEnhet:checked").length;"utlandContactEnhet"===$(this).attr("id")&&e?t.slideDown(k):e||t.slideUp(k)})}function t(){var e=$("#excase1").is(":checked"),t=$("#utlandContactEnhet").is(":checked"),n=$("#notinnorwaypostalplace").val(),i=$("input[type='radio']:checked").length>0,a=$("#navUnitOrg").val(),r=isNotUndefined(a)&&a.length>0,o=$("#navUnitMultiple").val(),s=isNotUndefined(o)&&o.length>0;if(e||t||i&&(r||s)){var l=localStorage.getItem("skjemaveileder_chosennavunit_privatperson");if(null!==l){var c=JSON.parse(l).navUnit;if("undefined"!=typeof c&&null!==c&&c.length>1){var u=JSON.parse(l).navUnitID;e?restoreSelectedNavUnitViewElements($("#navdepartment1"),c):t?restoreSelectedNavUnitViewElements($("#excaseNAVKontor"),c):r?restoreSelectedNavUnitViewElements($("#navUnitOrg"),c):s&&restoreSelectedNavUnitViewElements($("#navUnitMultiple"),c),$("#chosennavunit").val(u)}}}if(i&&"undefined"!=typeof n&&n.length>0){var d=localStorage.getItem("postalDetails");if(null!==d){var f=JSON.parse(d).postalCode,p=JSON.parse(d).navUnitID,h=JSON.parse(d).postalPlace;$("#notinnorwayzip").val(f),$("#postalplacetxt").text(h),$("#chosennavunit").val(p)}}else localStorage.removeItem("postalDetails")}function n(){var e=$('input[type="radio"][id^="top-level-rb"]');e.length>0&&c(e);var t=$('input[type="radio"][name="hasfrontpage"]');t.length>0&&c(t);var n=$('input[type="radio"][id^="first-level-rb"]');c(n);var i=$('input[type="radio"][id^="second-level-rb"]');d(i)}function a(){$("input[type='radio']:checked").click(),$("#excase1").is(":checked")?$("#nav-unit").show():$("#utlandContactEnhet").is(":checked")&&$("#nav-unit-2").show()}function r(e){var t=$(".radio-choice-wrapper[data-checked='false']"+e);t.find("input[type='text']").val(""),t.find(".js-cleanup-on-deselect").empty().val(""),t.find(".radio-choice-wrapper[data-checked='true']").attr("data-checked",!1);var n=t.find("input:not([data-single-choice='true']):checked").attr("checked",!1);if(n.length>0&&n.hasClass("triggersDropdown")){var i="#"+n.attr("aria-controls");$(i).hide()}var a=$("span.chosenNavUnitName").filter(function(){return $(this).text().length>0}),r=a.text().length>1;isNotUndefined(a)&&r&&restoreNavUnitTextInput(a,!1)}function o(e){$("#chosennavunit").val(""),e.find("li").remove(),e.hide()}function s(e){"alt6"===e.attr("value")?$("#chosennavunit").val(""):"alt7"===e.attr("value")&&$("#chosennavunit").val($("#navofficealt7").val())}function l(e){if($("input[name='situation']").attr("value",""),"situation"===e.attr("name"))e.attr("value",e.attr("data-value"));else if("true"===e.attr("data-placeholder-radio")){var t=$("#"+e.attr("data-placeholder-for"));t.attr("value",t.attr("data-value"))}}function c(e){e.on("click",function(){var e=$(this),t=e.parent();"true"!==t.attr("data-checked")&&(t.attr("data-checked",!0),$("input[name='situation'][type='hidden']").attr("data-checked",!1),$("#"+e.attr("data-placeholder-for")).attr("data-checked",!0),t.find(".address-dropdown").first().slideToggle(k),t.siblings("[data-checked='true']").length>0&&$(t.siblings("[data-checked='true']")).attr("data-checked",!1).find(".address-dropdown:not([data-stay-expanded='true'])").slideUp(k).find('.input-container[data-is-showing="true"]').hide().attr("data-is-showing",!1).parent().find("input[name='situation']").attr("checked",!1),r("[data-radio-level='1']"),o($(".nav-office-selection")),u(),l(e),$(".error-panel.showing").removeClass("showing").hide().find("li").hide())})}function u(){$("span.chosenNavUnitName").text("")}function d(e){e.on("click",function(e){var t=$(this).parent().find(".input-container");"true"===t.attr("data-is-showing")?e.preventDefault():($(".input-container[data-is-showing='true']").slideToggle(k).attr("data-is-showing",!1).parent().attr("data-checked",!1),t.length>0?t.slideToggle(k).attr("data-is-showing",!0).parent().attr("data-checked",!0):$(this).parent().attr("data-checked",!0),r("[data-radio-level='2']"),o($(".nav-office-selection")),u(),s($(this)),l($(this)),$(".error-panel.showing").removeClass("showing").hide().find("li").hide())})}function f(){$("#innorwayzip").bind("keyup",function(){var e=/^[0-9]{4}$/,t=$(this).val();4==t.length&&t.match(e)&&($(this).attr("data-active-postnr-input",!0),checkPostalNumber(),o($("#navEnhetSelection")))}),$("#notinnorwayzip").bind("keyup",function(){var e=$(this),t=/^[0-9]{4}$/,n=$(this).val();4==n.length&&n.match(t)&&($(this).attr("data-active-postnr-input",!0),checkPostalNumber(e),o($("#navEnhetSelection2")))})}function p(){changenavdepartment1();var e=$("#chosennavunit");addAutocomplete($("#navdepartment1"),e,$("#navdepartment1Selected"),$("#navdepartment1SelectedChangeButton")),addAutocomplete($("#excaseNAVKontor"),e,$("#excaseNAVKontorSelected"),$("#excaseNAVKontorSelectedChangeButton")),addAutocomplete($("#navUnitMultiple"),e,$("#navUnitMultipleSelected"),$("#navUnitMultipleSelectedChangeButton")),addAutocomplete($("#navUnitOrg"),e,$("#navUnitOrgSelected"),$("#navUnitOrgSelectedChangeButton"))}function h(e){$.when(e.find("input[data-required-by-controller]")).then(function(){var e="#"+$(this).attr("data-required-by-controller");$(e).is(":checked")?$(this).attr("data-required",!0):$(this).attr("data-required",!1)})}function m(){return $("input[type='radio']:checked").filter(function(){var e=isNotUndefined($(this).attr("data-placeholder-radio"))&&"true"===$(this).attr("data-placeholder-radio"),t="hasfrontpage"===$(this).attr("name")&&"false"===$(this).attr("value"),n="situation"===$(this).attr("name")||e||t;return n?!0:!1}).last()}function v(){$("#address-options-form").submit(function(e){var t=$("input[name='hasfrontpage']:checked");if(t.length>0){if("true"===t.attr("value"))return!0;var n=parseInt(t.parent().attr("data-radiogroup-count")),i=1===$("input[type='radio']:checked").length;if(n>1&&i&&"false"===t.attr("value"))return $("#frontpage-errortext").removeClass("hide").addClass("showing").show(),$("#frontpage-errorpanel").removeClass("hide").addClass("showing").show(),e.preventDefault(),!1}var a=!1,r=m(),o=r.parent(),s=r.attr("value");if("situation"!==r.attr("name")||"alt6"!==s&&"alt7"!==s){if(r.length>0){var l=parseInt(o.attr("data-radiogroup-count"));if(1===l){var c=$("#"+o.attr("data-error-panel"));h(o),a=b(o.find("input[data-required='true']"),c)}else if(l>1){var u=o.find(".address-dropdown .radio-choice-wrapper[data-checked='true']"),c=$("#"+u.attr("data-error-panel"));h(u),a=b(u.find("input[data-required='true']"),c)}}}else a=!0;if(a=g(a))return y(),!0;var d=$("input[type='radio'][name='top-level-radio-placeholder']").is(":checked"),f=$("input[type='radio'][name='radio-placeholder']").is(":checked"),p=$("input[type='radio'][name='situation']").is(":checked"),v=$("input[type='radio'][value='alt3']").is(":checked"),x=$("input[type='radio'][name='utland']").is(":checked"),C=$("input[type='radio'][value='abroad']").is(":checked"),w=$("input[type='radio'][id='top-level-rb-1']").is(":checked");$("input[type='radio'][id='top-level-rb-2']").is(":checked");var k=$("input[type='radio'][id='first-level-rb-2']").is(":checked"),T=$("input[type='radio'][id='first-level-rb-1']").is(":checked");!f&&d&&w&&($("#toplevel-errortext").removeClass("hide").addClass("showing").show(),$("#toplevel-errorpanel").removeClass("hide").addClass("showing").show()),f||d||T||($("#main-errorpanel").removeClass("hide").addClass("showing").show(),$("#main-errortext").removeClass("hide").addClass("showing").show()),!p&&C&&($("#utland-errortext").removeClass("hide").addClass("showing").show(),$("#utland-errorpanel").removeClass("hide").addClass("showing").show()),v&&!x&&($("#alt3-errorpanel").removeClass("hide").addClass("showing").show(),$("#contactwithnav-errortext").removeClass("hide").addClass("showing").show()),!k||p||x||($("#utland-errortext").removeClass("hide").addClass("showing").show(),$("#utland-errorpanel").removeClass("hide").addClass("showing").show()),k&&p&&x&&($("#contactwithnav-errorpanel").removeClass("showing").addClass("hide").hide(),$("#contactwithnav-errortext").removeClass("showing").addClass("hide").hide()),e.preventDefault()})}function g(e){var t=e,n=$("input[type='radio'][value='alt3']").is(":checked"),i=$("input[name='utland']");return n&&i.length>0&&!i.is(":checked")&&t&&(t=!1),t}function y(){var e=$("span.chosenNavUnitName").filter(function(){return $(this).text().length>0}).text(),t=$("#notinnorwayzip").val();e.length>1?localStorage.setItem("skjemaveileder_chosennavunit_privatperson",JSON.stringify({navUnit:e,navUnitID:$("#chosennavunit").val()})):localStorage.removeItem("skjemaveileder_chosennavunit_privatperson"),isNotUndefined(t)&&4===t.length&&localStorage.setItem("postalDetails",JSON.stringify({postalCode:t,navUnitID:$("#chosennavunit").val(),postalPlace:$("#postalplacetxt").text()}))}function b(e,t){var n=t.find("ul");n.find("li").hide();var i=/^[0-9]{4}$/,a=!0;return $.each(e,function(e,t){var r=t.getAttribute("data-info-type"),o=null;if("postnr"===r){var s=t.value.match(i);o=n.find("#postnr-errortext"),s?o.hide():(a=!1,o.show())}else"fnr"===r?(o=n.find("#fnr-errortext"),w(t.value)?o.hide():(a=!1,o.show())):"adresse"===r?(o=n.find("#address-errortext"),x(t.value.trim(),o)||(a=!1)):"nav-office"===r&&(o=n.find("#nav-office-errortext"),0===t.value.trim().length||0===$("#chosennavunit").val().trim().length?(a=!1,o.show()):o.hide())}),a?t.removeClass("showing").addClass("hide"):t.removeClass("hide").addClass("showing").show(),a}function x(e,t){return e.length>0&&!C(e)?(t.hide(),!0):(t.show(),!1)}function C(e){return e.match(/[\[\]=\/\?@\:\;\|�!#��\$%&{}\+\^�~`�*><]/g)}function w(e){var t=[0,0,0,0,0,0,0,0,0,0,0],n=0,a=0,r=[3,7,6,1,8,9,4,5,2],o=[5,4,3,2,7,6,5,4,3,2],s=11,l=11,c=11;if("undefined"==e||e.length!=s||"00000000000"==e)return!1;for(i=0;s>i;i++){var u=e.charAt(i);if("0">u||u>"9")return!1;t[i]=u}for(i=0;s-2>i;i++)n+=t[i]*r[i];if(a=n%c,0==a&&(a=l),n=parseInt(t[s-2])+a-l,0!=n)return!1;for(n=0,i=0;s-1>i;i++)n+=t[i]*o[i];return a=n%c,(0==a||1==a)&&(a=l),n=parseInt(t[s-1])+a-l,0==n&&(validfnr=!0),0==n}var k=200;$(".address-options").length>0&&(n(),f(),p(),v(),e(),a(),t())}),navno.equalHeight=function(e){var t=Math.max.apply(null,e.map(function(){return $(this).outerHeight()})),n=t/16;e.css("height",n+"em")},$(function(){var e=$(".no-flexbox"),t=window.matchMedia("(min-width: 48.0652em)");if(e&&t.matches){var n=e.find(".hero-blocks.multiple .hero-block");n&&navno.equalHeight(n)}var i,a=$(".attachment-wrapper");i=function(e){var t=$(e.target),n=t.closest(".attachment-wrapper"),i=n.find(".collapsible"),a=n.find(".flipp");t.is(".flipp")&&e.preventDefault(),n.toggleClass("illuminated expanded"),a.toggleClass("open"),i.toggleClass("js-collapsed"),n.hasClass("expanded")?(a.attr({"aria-expanded":"true"}),a.find(".show-more").attr({"aria-hidden":"true"}),a.find(".show-less").attr({"aria-hidden":"false"}),i.attr({"aria-hidden":"false","aria-expanded":"true"})):(a.attr({"aria-expanded":"false"}),a.find(".show-more").attr({"aria-hidden":"false"}),a.find(".show-less").attr({"aria-hidden":"true"}),i.attr({"aria-hidden":"true","aria-expanded":"false"}))},$(".attachment-wrapper input:enabled").on("click",function(e){var t=$(this),n=t.closest(".attachment-wrapper");e.stopPropagation(),t.prop("checked")&&!n.hasClass("expanded")&&i(e)}),$(".attachment-wrapper input:enabled + label").on("click",function(e){var t=$(this),n=$("input#"+t.attr("for")),a=n.closest(".attachment-wrapper");e.stopPropagation(),e.preventDefault(),n.prop("checked")||a.hasClass("expanded")||i(e),n.prop("checked",!n.prop("checked"))}),$(".attachment-wrapper").on("click",function(e){i(e)}),a.each(function(){var e=$(this),t=e.find(".collapsible"),n=e.find(".flipp");n.attr({"aria-controls":t.attr("id"),"aria-owns":t.attr("id"),"aria-expanded":"false","aria-haspopup":"true"}),t.attr({"aria-hidden":"true","aria-expanded":"false","aria-labelledby":n.attr("id")})});var r=$(".truncate-wrapper");if(r.each(function(){var e=$(this);e.find(".full-text, .show-truncated-text").attr({"aria-hidden":!0}),e.find(".toggle-truncation").attr({"aria-controls":e.attr("id")})}),$(".toggle-truncation").on("click",function(){var e=$(this).closest(".truncate-wrapper"),t=e.find(".truncated-text"),n=e.find(".full-text"),i=e.find(".show-full-text"),a=e.find(".show-truncated-text");e.hasClass("js-full-text")?(e.removeClass("js-full-text"),n.attr({"aria-hidden":!0}),t.attr({"aria-hidden":!1}),i.attr({"aria-hidden":!1}),a.attr({"aria-hidden":!0}),i.focus()):(e.addClass("js-full-text"),n.attr({"aria-hidden":!1}),t.attr({"aria-hidden":!0}),i.attr({"aria-hidden":!0}),a.attr({"aria-hidden":!1}),a.focus())}),$("#warning-pdf-upload").length>0){var o=!!Object.prototype.hasOwnProperty.call(window,"ontouchstart"),s=window.navigator.platform.toUpperCase().indexOf("MAC")>=0,l=window.navigator.platform.match(/(iPhone|iPod|iPad)/i)?!0:!1,c=window.navigator.userAgent.toUpperCase().indexOf("ANDROID")>=0,u=window.navigator.vendor.toUpperCase().indexOf("GOOGLE")>=0;(u&&!o||s||l||c)&&$(".innsending-info").attr("data-pdf-info-showing",!0),u&&!o?$(".user-message-panel[data-platform='chrome-pdf-info']").show():s?$(".user-message-panel[data-platform='mac-pdf-info']").show():l?$(".user-message-panel[data-platform='ios-pdf-info']").show():c&&$(".user-message-panel[data-platform='android-pdf-info']").show()}$("#form-complaint-firstpage").on("submit change",function(e){var t=$(this);t.find("option:selected").prop("disabled")?(e.preventDefault(),t.find(".error-panel").css("display","block")):t.find(".error-panel").css("display","none")}),"undefined"!=typeof ga&&ga.hasOwnProperty("loaded")&&ga.loaded===!0&&($("#generate-pdf, a.download-attachment").on("click.google-analytics",function(){ga("send","event","skjemaveileder","nedlasting",$(this).text())}),$("#goto-sendsoknad").on("click.google-analytics",function(){ga("send","event","skjemaveileder","klikk","Til sendsoknad")}),$("#goto-dokumentinnsending").on("click.google-analytics",function(){ga("send","event","skjemaveileder","klikk","Til dokumentinnsending")}),$(".toggle-truncation.show-full-text").on("click.google-analytics",function(){ga("send","event","skjemaveileder","klikk","Vis hele teksten (velg skjema)")}))});